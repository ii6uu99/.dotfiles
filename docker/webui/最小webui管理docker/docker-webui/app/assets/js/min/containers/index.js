!function e(t,a,n){function i(l,r){if(!a[l]){if(!t[l]){var o="function"==typeof require&&require;if(!r&&o)return o(l,!0);if(c)return c(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var d=a[l]={exports:{}};t[l][0].call(d.exports,function(e){var a=t[l][1][e];return i(a?a:e)},d,d.exports,e,t,a,n)}return a[l].exports}for(var c="function"==typeof require&&require,l=0;l<n.length;l++)i(n[l]);return i}({1:[function(e,t,a){function n(){var e=$(".client-filters").hide(),t=!1,a=0;if(e.find("ul.dropdown-menu").html(""),$.map(m,function(e){t||g.client!=e.key||(t=e.value),a++}),t&&e.find(".caption").text(t),!(a<=1)){var n='<li><a href="#-1">All</a></li>';$.map(m,function(e){n+='<li><a href="#'+e.key+'">'+e.value+"</a></li>"}),e.find("ul.dropdown-menu").html(n),e.fadeIn(),$("#client-filter .dropdown-menu a").click(function(e){var t=$(this),a=t.closest(".btn-group").removeClass("open");a.find(".caption").text(t.text()).blur(),g.client=t.attr("href").substring(1),ReactDOM.render(React.createElement(b,{reload:!1}),document.getElementById("data")),app.func.stop(e)})}}function i(){var e=$(".label-filters").hide(),t=!1,a=0;if(e.find("ul.dropdown-menu").html(""),$.map(p,function(e){t||g.label!=app.func.hash(e.key+"->"+e.value)||(t=e.value),a++}),t||g.label!=-1||(t="Not Labeled"),t&&e.find(".caption").text(t),!(a<=1)){var n='<li><a href="#0">All</a></li>',i="";n+='<li><a href="#-1">Not Labeled</a></li>',$.map(p,function(e){i!=e.key&&(n+='<li class="dropdown-header">'+e.key+"</li>",i=e.key);var t=e.value;t.length>20&&(t=t.substring(0,20)+".."),t="&nbsp;&nbsp;&nbsp;&nbsp;"+t,n+='<li><a href="#'+app.func.hash(e.key+"->"+e.value)+'">'+t+"</a></li>"}),e.find("ul.dropdown-menu").html(n),e.fadeIn(),$("#label-filter .dropdown-menu a").click(function(e){var t=$(this),a=t.closest(".btn-group").removeClass("open");if(a.find(".caption").text(t.text().trim()).blur(),g.label=t.attr("href").substring(1),window.history&&window.history.pushState){var n=0==g.label?"/":"/?l="+g.label;history.pushState(null,null,n)}ReactDOM.render(React.createElement(b,{reload:!1}),document.getElementById("data")),app.func.stop(e)})}}function c(e){var t=$('#status-filter a[href="#'+e+'"]'),a=t.closest(".btn-group").removeClass("open");a.find(".caption").text(t.text()).blur(),app.storage.set("filters-status",e),g.status=e}function l(){var e=$("#search-text").val().replace(/\s/g," ").replace(/　/g," ");e=e.replace(/^\s+|\s+$/gm,"").toUpperCase(),g.text!=e&&(g.text=e,ReactDOM.render(React.createElement(b,{reload:!1}),document.getElementById("data")))}function r(e){e=e?e:R,e.format=e.format?e.format:function(e){return JSON.stringify(e,!0," ")};var t=$("#container-detail"),a=t.find(".details").hide();app.func.ajax({type:"GET",url:e.url,data:e.conditions,success:function(n){t.find(".detail-title").text(e.title),a.text(e.format(n)).fadeIn(),t.modal("show"),R=e},error:function(){e.err&&alert(e.err)}})}function o(e,t,a){var n={name:a};e&&(n.client=e),app.func.ajax({type:"POST",url:"/api/container/rename/"+t,data:n,success:function(e){return e.indexOf("successfully")==-1?void alert(e):void ReactDOM.render(React.createElement(b,{reload:!0}),document.getElementById("data"))}})}function s(e,t,a,n,i,c){var l={repo:a,tag:n,msg:i,author:c};e&&(l.client=e),app.func.ajax({type:"POST",url:"/api/container/commit/"+t,data:l,success:function(e){var t=e.error?e.error:"committed successfully.";alert(t)}})}function d(e,t){return m.length>1?e:t}var u=app.func.query("q"),m=[],p=[],f=[],h="",g={client:app.func.query("c",-1),status:app.storage.get("filters-status",3),label:parseInt(app.func.query("l","0"),10),text:""},v=!1;""!=u&&(g.text=u.replace(/\s/g," ").replace(/　/g," "),g.text=g.text.replace(/^\s+|\s+$/gm,"").toUpperCase()),$(document).ready(function(){$("#menu-containers").addClass("active"),$("#container-detail pre").css({height:$(window).height()-200+"px"}),h=$("#override-label-id").val(),v="true"==$("#mode-view-only").val();var e=$("#search-text").blur(l);""!=u&&e.val(u),c(g.status),$("#status-filter .dropdown-menu a").click(function(e){c(parseInt($(this).attr("href").substring(1),10)),ReactDOM.render(React.createElement(b,{reload:!0}),document.getElementById("data")),app.func.stop(e)}),$(".detail-refresh a").click(function(e){r(),app.func.stop(e)}),$("#container-name").on("shown.bs.modal",function(){$("#container-name input").focus()}),$("#container-name .act-rename").click(function(e){var t=$("#container-name"),a=t.find(".container-name").val(),n=t.find(".client-id").val(),i=app.func.trim(t.find("input.new-name").val());return 0==i.length?(t.find("input.new-name").focus(),void app.func.stop(e)):(t.modal("hide"),o(n,a,i),void app.func.stop(e))}),$("#container-commit").on("shown.bs.modal",function(){$("#container-commit .tag").focus()}),$("#container-commit .act-commit").click(function(){var e=$("#container-commit"),t=e.find(".container-name").val(),a=e.find(".client-id").val(),n=e.find(".repository").val(),i=e.find(".tag").val(),c=e.find(".message").val(),l=e.find(".author").val();return 0==n.length?void e.find(".repository").focus():(e.modal("hide"),void s(a,t,n,i,c,l))})}),$(window).keyup(function(){var e=$("#search-text");e.is(":focus")&&l()});var R={},E=React.createClass({displayName:"TableRow",propTypes:{content:React.PropTypes.object},inspect:function(){var e=$(ReactDOM.findDOMNode(this)),t=e.attr("data-container-id"),a="["+t.substring(0,4)+"] "+e.find(".dropdown a.dropdown-toggle").attr("data-container-name"),n=d("?client="+e.attr("data-client-id"),"");r({title:a,url:"/api/container/inspect/"+t+n})},processes:function(){var e=$(ReactDOM.findDOMNode(this)),t=e.find(".dropdown a.dropdown-toggle").attr("data-container-name"),a=d("?client="+e.attr("data-client-id"),"");app.func.link("/container/top/"+t+a)},statlog:function(){var e=$(ReactDOM.findDOMNode(this)),t=e.find(".dropdown a.dropdown-toggle").attr("data-container-name"),a=d("?client="+e.attr("data-client-id"),"");app.func.link("/container/statlog/"+t+a)},changes:function(){var e=$(ReactDOM.findDOMNode(this)),t=e.find(".dropdown a.dropdown-toggle").attr("data-container-name"),a=d("?client="+e.attr("data-client-id"),"");app.func.link("/container/changes/"+t+a)},_action:function(e,t){var a=$(ReactDOM.findDOMNode(this)),n=a.find(".dropdown a.dropdown-toggle").attr("data-container-name"),i=d({client:a.attr("data-client-id")},""),c=t.success?t.success:function(e){var a=e.error?e.error:(t.msg?t.msg:t.action+"ed")+" successfully.";ReactDOM.render(React.createElement(b,{reload:!0}),document.getElementById("data")),alert(a)};t.confirm&&!window.confirm(t.confirm+n)||app.func.ajax({type:"POST",url:"/api/container/"+t.action+"/"+n,data:i,success:c})},restart:function(){v||this._action(this,{action:"restart"})},start:function(){v||this._action(this,{action:"start"})},stop:function(){v||this._action(this,{action:"stop",msg:"stopped"})},kill:function(){v||this._action(this,{action:"kill"})},rm:function(){v||this._action(this,{action:"rm",msg:"removed",confirm:"Are you sure to remove the container?\nID: "})},rename:function(){if(!v){var e=$(ReactDOM.findDOMNode(this)),t=e.find(".dropdown a.dropdown-toggle").text(),a=e.find(".dropdown a.dropdown-toggle").attr("data-container-name"),n=$("#container-name");n.find(".title").text(t),n.find("input").val(a),n.find(".container-name").val(a),n.find(".client-id").val(e.attr("data-client-id")),n.modal("show")}},commit:function(){if(!v){var e=$(ReactDOM.findDOMNode(this)),t=e.find(".dropdown a.dropdown-toggle").text(),a=e.find(".image").text(),n=$("#container-commit"),i=a.indexOf(":");n.find(".title").text(t),n.find(".repository").val(0==i?a:a.substring(0,i)),n.find(".tag").val(0==i?"":a.substring(i+1)),n.find(".container-name").val(t),n.find(".client-id").val(e.attr("data-client-id")),n.modal("show")}},image:function(){var e=$(ReactDOM.findDOMNode(this)),t=e.find(".image").text(),a=d("&c="+e.attr("data-client-id"),"");app.func.link("/images?q="+t+a)},render:function(){var e=this.props.content,t=e.container,a=t.id.substring(0,20),n="",i="",c="",l=t.command,r=t.status;return t.ports&&$.map(t.ports,function(e){c+=(e.IP?e.IP+":":"")+(e.PublicPort?e.PublicPort+"->":"")+e.PrivatePort+"/"+e.Type+","}),t.names&&$.map(t.names,function(e){n+=e.replace("/","")+", ",i=e.replace("/","")}),h&&t.labels&&$.map(t.labels,function(e,t){t==h&&(n=e+"..")}),l.length>13&&(l=l.substring(0,13)+".."),r=r?r.replace(/seconds*/,"sec").replace(/minutes*/,"min").replace(/About /,""):"",v?React.createElement("tr",{key:a+e.endpoint,"data-client-id":e.client.id,"data-container-id":a},React.createElement("td",{className:"data-index"},t.id.substring(0,4)),React.createElement("td",{className:"data-name"},React.createElement("ul",{className:"nav"},React.createElement("li",{className:"dropdown"},React.createElement("a",{className:"dropdown-toggle","data-toggle":"dropdown",href:"#","aria-expanded":"true","data-container-name":i},React.createElement("span",null,n.substring(0,n.length-2)+e.endpoint)),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,React.createElement("a",{onClick:this.inspect},"inspect")),React.createElement("li",null,React.createElement("a",{onClick:this.processes},"processes (top)")),React.createElement("li",null,React.createElement("a",{onClick:this.statlog},"stats & logs")),React.createElement("li",null,React.createElement("a",{onClick:this.changes},"changes (diff)")),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{onClick:this.image},"image")))))),React.createElement("td",{className:"data-name"},l),React.createElement("td",{className:"data-name"},c.substring(0,c.length-1)),React.createElement("td",{className:"data-name image"},t.image),React.createElement("td",{className:"data-name"},r)):React.createElement("tr",{key:a+e.endpoint,"data-client-id":e.client.id,"data-container-id":a},React.createElement("td",{className:"data-index"},t.id.substring(0,4)),React.createElement("td",{className:"data-name"},React.createElement("ul",{className:"nav"},React.createElement("li",{className:"dropdown"},React.createElement("a",{className:"dropdown-toggle","data-toggle":"dropdown",href:"#","aria-expanded":"true","data-container-name":i},React.createElement("span",null,n.substring(0,n.length-2)+e.endpoint)),React.createElement("ul",{className:"dropdown-menu"},React.createElement("li",null,React.createElement("a",{onClick:this.inspect},"inspect")),React.createElement("li",null,React.createElement("a",{onClick:this.processes},"processes (top)")),React.createElement("li",null,React.createElement("a",{onClick:this.statlog},"stats & logs")),React.createElement("li",null,React.createElement("a",{onClick:this.changes},"changes (diff)")),React.createElement("li",null,React.createElement("a",{onClick:this.rename},"rename")),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{onClick:this.restart},"restart")),React.createElement("li",null,React.createElement("a",{onClick:this.start},"start")),React.createElement("li",null,React.createElement("a",{onClick:this.stop},"stop")),React.createElement("li",null,React.createElement("a",{onClick:this.kill},"kill")),React.createElement("li",null,React.createElement("a",{onClick:this.rm},"rm")),React.createElement("li",{className:"divider"}),React.createElement("li",null,React.createElement("a",{onClick:this.commit},"commit")),React.createElement("li",null,React.createElement("a",{onClick:this.image},"image")))))),React.createElement("td",{className:"data-name"},l),React.createElement("td",{className:"data-name"},c.substring(0,c.length-1)),React.createElement("td",{className:"data-name image"},t.image),React.createElement("td",{className:"data-name"},r))}}),b=React.createClass({displayName:"Table",getInitialState:function(){return{data:[]}},load:function(e){m=[],p=[],app.func.ajax({type:"GET",url:"/api/containers",data:{status:g.status},success:function(t){if(t.error)return void alert(t.error);f=t;var a={clients:{},labels:{}},c=$("#filter-label-ids").val();$.map(f,function(e){a.clients[""+e.client.id]=e.client.endpoint.replace(/^.*:\/\//,"").replace(/:.*$/,""),$.map(e.containers,function(e){e.labels&&$.map(e.labels,function(e,t){"all"!=c&&c.indexOf(t)==-1||(a.labels[t]||(a.labels[t]={}),a.labels[t][e]=!0)})})}),$.map(a.clients,function(e,t){m.push({key:t,value:e})}),$.map(a.labels,function(e,t){$.map(e,function(e,a){p.push({key:t,value:a})})}),m.sort(function(e,t){return e.value<t.value?-1:e.value>t.value?1:0}),p.sort(function(e,t){return e.key<t.key?-1:e.key>t.key?1:e.value<t.value?-1:e.value>t.value?1:0}),n(),i(),e.setState({data:e.filter()})}})},filter:function(){var e=[];return $.map(f,function(t){g.client!=-1&&t.client.id!=g.client||$.map(t.containers,function(a){if(0==g.label||g.label==-1&&!a.labels)e.push({client:t.client,container:a});else{if(!a.labels)return;var n=!1;$.map(a.labels,function(e,t){n|=g.label==app.func.hash(t+"->"+e)}),n&&e.push({client:t.client,container:a})}})}),e.sort(function(e,t){return e.container.names.join(",")<t.container.names.join(",")?-1:e.container.names.join(",")>t.container.names.join(",")?1:0}),$("#count").text(e.length+" container"+(e.length>1?"s":"")),e},componentDidMount:function(){this.load(this)},componentWillReceiveProps:function(e){return e.reload?void this.load(this):void this.setState({data:this.filter()})},render:function(){var e=f.length>1&&g.client==-1,t=this.state.data.map(function(t,a){var n=t.client,i=t.container,c=t.container.id.substring(0,10);if(""!=g.text){var l=!0;if($.map(g.text.split(" "),function(e){var t=i.id.substring(0,10).toUpperCase().indexOf(e)>-1;$.map(i.names,function(a){t|=a.toUpperCase().indexOf(e)>-1}),t|=i.image.toUpperCase().indexOf(e)>-1,t|=i.command&&i.command.toUpperCase().indexOf(e)>-1,t|=i.status&&i.status.toUpperCase().indexOf(e)>-1,i.ports&&$.map(i.ports,function(a){t|=a.Type.toUpperCase().indexOf(e)>-1,t|=a.IP.indexOf(e)>-1,t|=(""+a.PrivatePort).indexOf(e)>-1,t|=(""+a.PublicPort).indexOf(e)>-1}),l&=t}),!l)return}return React.createElement(E,{key:c+"@"+n.id,index:c+"@"+a,content:{endpoint:e?" @"+n.endpoint.replace(/^.*:\/\//,"").replace(/:.*$/,""):"",client:n,container:i}})});return React.createElement("table",{className:"table table-striped table-hover"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"ID"),React.createElement("th",null,"Names"),React.createElement("th",null,"Command"),React.createElement("th",null,"Ports"),React.createElement("th",null,"Repository & Tags"),React.createElement("th",null,"Status"))),React.createElement("tbody",null,t))}});ReactDOM.render(React.createElement(b,{reload:!1}),document.getElementById("data"))},{}]},{},[1]);